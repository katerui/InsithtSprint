<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>InsightSprintï½œèª¿æŸ»ãƒ‡ãƒ¼ã‚¿åˆ†æã‚µãƒ¼ãƒ“ã‚¹ - KITAIæ ªå¼ä¼šç¤¾</title>
  <meta name="description" content="ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã®ãƒ­ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãŠæ¸¡ã—ã„ãŸã ãã ã‘ã€‚ç”ŸæˆAIÃ—å°‚é–€çŸ¥è¦‹ã«ã‚ˆã‚Šç¿Œå–¶æ¥­æ—¥ã«â€œä½¿ãˆã‚‹â€PDFãƒ¬ãƒãƒ¼ãƒˆã‚’ç´å“ã™ã‚‹ã€InsightSprintã€ã®ç´¹ä»‹ã‚µã‚¤ãƒˆã€‚" />
  <style>
    :root{
      --ink:#0b1220;
      --sub:#334155;
      --muted:#64748b;
      --line:#e2e8f0;
      --soft:#f8fafc;
      --accent:#0ea5e9;
      --accent-2:#22d3ee;
      --ok:#10b981;
      --warn:#f59e0b;
      --danger:#ef4444;
      --radius:18px;
      --shadow: 0 8px 32px rgba(2,6,23,.14);
      --shadow-strong: 0 12px 48px rgba(2,6,23,.24);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      background:
        radial-gradient(1200px 360px at 50% -80px, rgba(14,165,233,.08), transparent),
        linear-gradient(180deg,var(--soft),#fff);
      font-family: system-ui, -apple-system, "Segoe UI", "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic", Meiryo, sans-serif;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility; line-height:1.6;
      overflow-x:hidden;
    }
    a{color:var(--accent); text-decoration:none}

    /* Header */
    header{
      position:sticky; top:0; z-index:40; backdrop-filter:saturate(180%) blur(12px);
      background:rgba(255,255,255,.85); border-bottom:1px solid var(--line);
      transition: box-shadow .35s ease;
    }
    header.is-scrolled{ box-shadow: var(--shadow); }
    .wrap{max-width:1100px; margin:0 auto; padding:0 18px}
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px; height:64px}
    .logo{display:flex; align-items:center; gap:12px}
    .logo svg{height:32px; width:auto; display:block}
    .logo-title{
      font-weight:800; letter-spacing:.2px; font-size:18px; line-height:1;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      white-space:nowrap;
    }
    .logo .by{font-size:12px; color:var(--muted); font-weight:600}
    .nav a{color:var(--sub); font-weight:600}
    .nav .menu{display:flex; gap:18px; align-items:center}

    /* Buttons - CTA */
    .cta-btn{
      --glow: rgba(34,211,238,.35);
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:14px 20px; font-weight:900; border-radius:999px; color:white;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      box-shadow: 0 6px 20px var(--glow), inset 0 0 0 1px rgba(255,255,255,.15);
      border:none; cursor:pointer; position:relative; overflow:hidden; transform:translateZ(0);
      transition: transform .18s ease, box-shadow .25s ease, filter .25s ease;
      isolation:isolate;
    }
    .cta-btn::after{ /* shine */
      content:""; position:absolute; inset:-150% -20%; background:
        linear-gradient(120deg, transparent 30%, rgba(255,255,255,.6) 50%, transparent 70%);
      transform: translateX(-60%); pointer-events:none; filter: blur(1px);
    }
    .cta-btn:hover{ transform: translateY(-2px); box-shadow: var(--shadow-strong); filter: saturate(110%); }
    .cta-btn:hover::after{ animation: shine 1.2s ease; }
    @keyframes shine { to { transform: translateX(60%);} }

    /* Hero */
    .hero{
      position:relative; overflow:hidden;
      background:
        radial-gradient(1200px 360px at 50% -80px, rgba(14,165,233,.18), transparent),
        linear-gradient(180deg, #08101b, #0b1524 40%, #0b1524);
      color:#e6f6ff;
    }
    .hero::before{
      content:""; position:absolute; inset:-20% -10%;
      background: conic-gradient(from 0deg at 50% 50%, rgba(14,165,233,.18), transparent, rgba(34,211,238,.12), transparent);
      animation: swirl 18s linear infinite;
    }
    @keyframes swirl { to { transform: rotate(360deg);} }
    .hero .wrap{padding:64px 18px 46px; position:relative; z-index:1}
    .hero h1{font-size: clamp(28px, 4.8vw, 48px); line-height:1.15; margin:0 0 12px; text-shadow:0 2px 24px rgba(14,165,233,.18); display:flex; align-items:center; gap:10px; flex-wrap:wrap}
    .hero p.lead{color:#cfe8f8; font-size: clamp(14px, 1.6vw, 18px); margin:0 0 26px}
    .hero .kpis{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:18px}
    .kpi{background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.18); border-radius:var(--radius); padding:14px 16px; backdrop-filter: blur(6px)}
    .kpi strong{font-size:20px}

    /* Sections */
    section{padding:54px 0; background:#fff}
    section.alt{background:linear-gradient(180deg, #f8fbff, #ffffff)}
    h2{font-size: clamp(20px, 3vw, 28px); margin:0 0 16px}
    .sub{color:var(--sub)}
    .grid{display:grid; gap:16px}
    .g-2{grid-template-columns:repeat(2,1fr)}
    .g-3{grid-template-columns:repeat(3,1fr)}
    .card{
      background:#fff; border:1px solid var(--line); border-radius:var(--radius); padding:18px;
      box-shadow: var(--shadow); position:relative; overflow:hidden;
    }
    .card::after{
      content:""; position:absolute; inset:-1px; border-radius:inherit; padding:1px; background:
        linear-gradient(90deg, rgba(14,165,233,.24), rgba(34,211,238,.18));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor; mask-composite: exclude; pointer-events:none; opacity:.45;
    }
    .badge{display:inline-block; font-size:12px; padding:4px 8px; border-radius:999px; background:#e6f6ff; color:#075985; font-weight:700}

    table{width:100%; border-collapse:collapse; background:#fff; border-radius:12px; overflow:hidden}
    th,td{border:1px solid var(--line); padding:10px 12px; text-align:left; vertical-align:top}
    th{background:#eef6ff}
    .note{color:var(--muted); font-size:12px}

    /* Flow */
    .flow{counter-reset: step}
    .flow li{list-style:none; position:relative; padding-left:48px; margin:14px 0}
    .flow li::before{counter-increment: step; content: counter(step); position:absolute; left:0; top:0; width:34px; height:34px; border-radius:50%;
      background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; font-weight:800; display:grid; place-items:center; box-shadow:var(--shadow)}

    /* CTA variants */
    .cta{border:1px solid var(--line); background:linear-gradient(180deg,#ecfeff,#f0f9ff); padding:18px; border-radius:var(--radius);
      display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:12px}
    .cta-btn.cta-primary{
      font-size: clamp(14px, 1.6vw, 18px); padding:16px 24px;
      animation: pulse 2.4s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100% { box-shadow: 0 6px 20px rgba(34,211,238,.35), inset 0 0 0 1px rgba(255,255,255,.15);}
      50% { box-shadow: 0 10px 36px rgba(34,211,238,.55), inset 0 0 0 1px rgba(255,255,255,.12);}
    }

    /* Floating CTA */
    .cta-float{
      position:fixed; right:18px; bottom:18px; z-index:50;
      backdrop-filter: blur(6px);
    }
    .cta-float .cta-btn{ padding:16px 22px; font-size:16px; border-radius:16px; }
    .cta-float .label{display:inline-flex; align-items:center; gap:8px}

    /* Modal */
    dialog{border:none; border-radius:16px; width:min(680px,92vw); box-shadow:var(--shadow-strong); padding:0}
    dialog::backdrop{background:rgba(2,6,23,.55)}
    .modal{padding:18px}
    .modal header{position:static; backdrop-filter:none; background:#fff; border-bottom:1px solid var(--line)}

    /* Form */
    .field{display:grid; gap:6px; margin:10px 0}
    .field input[type="text"], .field input[type="email"], .field input[type="number"], .field textarea, .field select{
      width:100%; border:1px solid var(--line); border-radius:12px; padding:10px 12px; font:inherit; transition:border-color .2s ease, box-shadow .2s ease;
      background:#fff;
    }
    .field input:focus, .field textarea:focus, .field select:focus{outline:3px solid rgba(14,165,233,.3); border-color:var(--accent); box-shadow: 0 0 0 3px rgba(14,165,233,.15)}
    .muted{color:var(--muted)}

    /* Reveal on scroll */
    .reveal{opacity:0; transform: translateY(10px) scale(.99); transition: opacity .6s ease, transform .6s ease}
    .reveal.is-in{opacity:1; transform: none}

    /* Assistive */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    /* Responsive */
    @media (max-width: 900px){
      .g-2{grid-template-columns:1fr}
      .g-3{grid-template-columns:1fr}
      .hero .kpis{grid-template-columns:1fr}
      .cta-float .cta-btn{padding:14px 18px; font-size:15px}
      .hero h1{gap:8px}
    }
  </style>
  <!-- Stripe.jsï¼ˆå…¬é–‹éµã¯ç½®ãæ›ãˆã¦ãã ã•ã„ï¼‰ -->
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
  <!-- Header -->
  <header aria-label="ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³" id="siteHeader">
    <div class="wrap nav">
      <a class="logo" href="#top" aria-label="InsightSprint ãƒ›ãƒ¼ãƒ ">
        <!-- Inline SVG Logo -->
        <svg viewBox="0 0 64 64" role="img" aria-labelledby="isTitle isDesc" focusable="false" class="reveal">
          <title id="isTitle">InsightSprint ãƒ­ã‚´</title>
          <desc id="isDesc">æ‹¡å¤§é¡ã¨æ£’ã‚°ãƒ©ãƒ•ã€ã‚¹ãƒ—ãƒªãƒ³ãƒˆé€Ÿåº¦ã‚’ç¤ºã™ãƒ©ã‚¤ãƒ³ã‚’çµ„ã¿åˆã‚ã›ãŸã‚·ãƒ³ãƒœãƒ«</desc>
          <defs>
            <linearGradient id="isGrad" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#0ea5e9"/>
              <stop offset="100%" stop-color="#22d3ee"/>
            </linearGradient>
          </defs>
          <line x1="6" y1="24" x2="20" y2="24" stroke="url(#isGrad)" stroke-width="4" stroke-linecap="round"/>
          <line x1="10" y1="32" x2="22" y2="32" stroke="url(#isGrad)" stroke-width="3" stroke-linecap="round" opacity="0.85"/>
          <line x1="14" y1="40" x2="24" y2="40" stroke="url(#isGrad)" stroke-width="2.5" stroke-linecap="round" opacity="0.7"/>
          <circle cx="34" cy="30" r="14" fill="none" stroke="url(#isGrad)" stroke-width="4"/>
          <rect x="26" y="34" width="4" height="8" fill="url(#isGrad)" rx="1"/>
          <rect x="32" y="30" width="4" height="12" fill="url(#isGrad)" rx="1"/>
          <rect x="38" y="26" width="4" height="16" fill="url(#isGrad)" rx="1"/>
          <line x1="44" y1="44" x2="56" y2="56" stroke="url(#isGrad)" stroke-width="4" stroke-linecap="round"/>
        </svg>
        <span class="logo-title reveal" style="transition-delay:.06s">InsightSprint</span>
        <span class="by" aria-hidden="true">by KITAI</span>
      </a>
      <nav class="menu" aria-label="ä¸»è¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
        <a href="#features">æ©Ÿèƒ½</a>
        <a href="#pricing">æ–™é‡‘</a>
        <a href="#flow">å°å…¥ãƒ•ãƒ­ãƒ¼</a>
        <a href="#security">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</a>
        <a href="#faq">FAQ</a>
        <button class="cta-btn" id="ctaTop" aria-label="ä»Šã™ãç„¡æ–™ã§å§‹ã‚ã‚‹">ä»Šã™ãç„¡æ–™ã§å§‹ã‚ã¾ã—ã‚‡ã†ï¼</button>
      </nav>
    </div>
  </header>

  <!-- Floating CTA (always visible) -->
  <div class="cta-float" aria-hidden="false">
    <button class="cta-btn" id="ctaFloat" aria-label="ä»Šã™ãç„¡æ–™ã§å§‹ã‚ã‚‹ï¼ˆãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰">
      <span class="label">ğŸš€ ä»Šã™ãç„¡æ–™ã§å§‹ã‚ã¾ã—ã‚‡ã†ï¼</span>
    </button>
  </div>

  <!-- Hero -->
  <section class="hero" id="top" aria-label="ãƒ’ãƒ¼ãƒ­ãƒ¼">
    <canvas id="fx" aria-hidden="true" style="position:absolute; inset:0; z-index:0; opacity:.25;"></canvas>
    <div class="wrap">
      <!-- è¦‹å‡ºã—ï¼šInsightSprintãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ­ã‚´ã«ç½®æ› -->
      <h1 class="reveal" aria-label="InsightSprintï½œèª¿æŸ»ãƒ‡ãƒ¼ã‚¿åˆ†æã‚µãƒ¼ãƒ“ã‚¹">
        <span class="sr-only">InsightSprint</span>
        <svg viewBox="0 0 64 64" aria-hidden="true" focusable="false" style="height:34px;width:auto">
          <defs>
            <linearGradient id="isGrad2" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#0ea5e9"/>
              <stop offset="100%" stop-color="#22d3ee"/>
            </linearGradient>
          </defs>
          <line x1="6" y1="24" x2="20" y2="24" stroke="url(#isGrad2)" stroke-width="4" stroke-linecap="round"/>
          <line x1="10" y1="32" x2="22" y2="32" stroke="url(#isGrad2)" stroke-width="3" stroke-linecap="round" opacity="0.85"/>
          <line x1="14" y1="40" x2="24" y2="40" stroke="url(#isGrad2)" stroke-width="2.5" stroke-linecap="round" opacity="0.7"/>
          <circle cx="34" cy="30" r="14" fill="none" stroke="url(#isGrad2)" stroke-width="4"/>
          <rect x="26" y="34" width="4" height="8" fill="url(#isGrad2)" rx="1"/>
          <rect x="32" y="30" width="4" height="12" fill="url(#isGrad2)" rx="1"/>
          <rect x="38" y="26" width="4" height="16" fill="url(#isGrad2)" rx="1"/>
          <line x1="44" y1="44" x2="56" y2="56" stroke="url(#isGrad2)" stroke-width="4" stroke-linecap="round"/>
        </svg>
        ï½œèª¿æŸ»ãƒ‡ãƒ¼ã‚¿åˆ†æã‚µãƒ¼ãƒ“ã‚¹
      </h1>

      <p class="lead reveal" style="transition-delay:.05s">ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã®ãƒ­ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãŠæ¸¡ã—ã„ãŸã ãã ã‘ã€‚ç”ŸæˆAIÃ—å°‚é–€çŸ¥è¦‹ã«ã‚ˆã‚Šã€<strong>ç¿Œå–¶æ¥­æ—¥</strong>ã«æ„æ€æ±ºå®šã«ä½¿ãˆã‚‹PDFãƒ¬ãƒãƒ¼ãƒˆã‚’ç´å“ã€‚ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºï¼åºƒå‘Šä»£ç†åº—ã®ç¾å ´ã§æ±‚ã‚ã‚‰ã‚Œã‚‹ã€Œé€Ÿåº¦ã€ã€Œèª¬æ˜è²¬ä»»ã€ã€Œèª¿é”å®¹æ˜“æ€§ã€ã‚’åŒæ™‚ã«æº€ãŸã—ã¾ã™ã€‚</p>
      <div style="margin-top:18px; display:flex; gap:12px; flex-wrap:wrap" class="reveal" style="transition-delay:.1s">
        <button class="cta-btn cta-primary" id="ctaHero" aria-label="ä»Šã™ãç„¡æ–™ã§å§‹ã‚ã‚‹">ä»Šã™ãç„¡æ–™ã§å§‹ã‚ã¾ã—ã‚‡ã†ï¼</button>
        <a href="#pricing" class="cta-btn" style="background:transparent; color:#e6f6ff; border:2px solid rgba(255,255,255,.4)">æ–™é‡‘ã‚’è¦‹ã‚‹</a>
      </div>
      <div class="kpis reveal" style="transition-delay:.12s">
        <div class="kpi"><div class="badge">ã‚¹ãƒ”ãƒ¼ãƒ‰</div><div><strong>ç¿Œå–¶æ¥­æ—¥</strong> ç´å“</div><small>æ¨™æº–ãƒ‡ãƒ¼ã‚¿ä½“è£ãŒå‰æ</small></div>
        <div class="kpi"><div class="badge">å“è³ª</div><div><strong>å·®æˆ»ã—ç‡ â‰¦5%</strong> ç›®æ¨™</div><small>AIæ¨è«–ï¼‹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆé‹ç”¨</small></div>
        <div class="kpi"><div class="badge">èª¿é”</div><div><strong>è¨­å•æ•°ãƒ™ãƒ¼ã‚¹</strong>ã®æ˜ç­è¦‹ç©</div><small>è¦‹ç©ãƒ†ãƒ³ãƒ—ãƒ¬/ç™ºæ³¨è¦ä»¶æç¤º</small></div>
      </div>
    </div>
  </section>

  <!-- Features / Values -->
  <section id="features" class="alt">
    <div class="wrap reveal">
      <h2>ä¸»è¦ä¾¡å€¤</h2>
      <p class="sub">ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚º/ä»£ç†åº—ç¾å ´ã§å¿…è¦ãªè¦ä»¶ã‚’ã€æ¨™æº–ãƒ†ãƒ³ãƒ—ãƒ¬ã¨SLAã§æ‹…ä¿ã€‚</p>
      <div class="grid g-3" style="margin-top:10px">
        <div class="card"><h3>å³æ–­ã‚’å¾ŒæŠ¼ã—</h3><p>ç¿Œå–¶æ¥­æ—¥TATã¨æ¨™æº–ãƒ†ãƒ³ãƒ—ãƒ¬ã§ä¼šè­°ã‚’å‹•ã‹ã™ã€‚</p></div>
        <div class="card"><h3>å“è³ªã®å†ç¾æ€§</h3><p>AIæ¨è«–ï¼‹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆé‹ç”¨ã§å·®æˆ»ã—ç‡â‰¦5%ï¼ˆç›®æ¨™ï¼‰ã€‚</p></div>
        <div class="card"><h3>èª¿é”ã«å¼·ã„</h3><p>è¨­å•æ•°ãƒ™ãƒ¼ã‚¹ã®æ˜ç­è¦‹ç©ã€‚<br>è¦‹ç©ãƒ†ãƒ³ãƒ—ãƒ¬/ç™ºæ³¨è¦ä»¶ã‚’æç¤ºã€‚</p></div>
        <div class="card"><h3>èª¬æ˜è²¬ä»»ã‚’æ‹…ä¿</h3><p>å‡ºå…¸/æ³¨é‡ˆ/é›†è¨ˆæ¡ä»¶ã‚’æ˜è¨˜ã€‚PPTã¸å®¹æ˜“ã«è»¢ç”¨ã€‚</p></div>
        <div class="card"><h3>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</h3><p>AES-256ä¿ç®¡ãƒ»TLSè»¢é€ãƒ»MFAãƒ»ãƒ­ã‚°90æ—¥ä¿æŒã€‚é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã¯å­¦ç¿’ä¸ä½¿ç”¨ã€‚</p></div>
        <div class="card"><h3>FAåˆ†æ</h3><p>è‡ªç”±å›ç­”ã®è¦ç´„ãƒ»åˆ†é¡ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡ºã«å¯¾å¿œã€‚</p></div>
      </div>
    </div>
  </section>

  <!-- Templates -->
  <section id="templates">
    <div class="wrap reveal">
      <h2>ç”¨é€”åˆ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h2>
      <p class="sub">ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°é€Ÿå ± / ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ABæ¤œè¨¼ / æ–°è¦ææ¡ˆã®è£ä»˜ã‘ ãªã©</p>
      <div class="grid g-3" style="margin-top:10px">
        <article class="card"><h3>ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°é€Ÿå ±</h3><p>æœˆæ¬¡/é€±æ¬¡ã®ã‚¤ãƒ³ã‚µã‚¤ãƒˆç¢ºèªã‚’ç¿Œå–¶æ¥­æ—¥ã§ã€‚</p></article>
        <article class="card"><h3>æ–½ç­–ABæ¤œè¨¼</h3><p>æ–½ç­–åˆ‡æ›¿ã®åˆ¤æ–­ææ–™ã‚’å³æ—¥ã§å…±æœ‰ã€‚</p></article>
        <article class="card"><h3>ææ¡ˆã®è£ä»˜ã‘</h3><p>ãƒ”ãƒƒãƒã§ç¤ºå”†ã¨æ ¹æ‹ ã‚’1æšã«é›†ç´„ï¼ˆPPTé€£æºï¼‰ã€‚</p></article>
      </div>
    </div>
  </section>

  <!-- Pricing -->
  <section id="pricing" class="alt">
    <div class="wrap reveal">
      <h2>æ–™é‡‘ï¼ˆç¨åˆ¥ï¼‰</h2>
      <div class="card">
        <div style="overflow:auto">
          <table aria-label="æ–™é‡‘è¡¨" id="pricingTable">
            <thead><tr><th>è¨­å•æ•°</th><th>æ–™é‡‘</th><th>ç´æœŸç›®å®‰</th><th>ã‚«ãƒ¼ãƒ‰æ‰•ã„</th></tr></thead>
            <tbody>
              <tr data-qmin="1" data-qmax="10"><td>1ã€œ10å•</td><td data-price="79000">79,000å††</td><td>åŸå‰‡ ç¿Œå–¶æ¥­æ—¥</td><td><button class="cta-btn" data-pay-tier="10">ã‚«ãƒ¼ãƒ‰ã§æ”¯æ‰•ã†</button></td></tr>
              <tr data-qmin="11" data-qmax="30"><td>11ã€œ30å•</td><td data-price="99000">99,000å††</td><td>åŸå‰‡ ç¿Œå–¶æ¥­æ—¥</td><td><button class="cta-btn" data-pay-tier="30">ã‚«ãƒ¼ãƒ‰ã§æ”¯æ‰•ã†</button></td></tr>
              <tr data-qmin="31" data-qmax="50"><td>31ã€œ50å•</td><td data-price="119000">119,000å††</td><td>åŸå‰‡ ç¿Œå–¶æ¥­æ—¥</td><td><button class="cta-btn" data-pay-tier="50">ã‚«ãƒ¼ãƒ‰ã§æ”¯æ‰•ã†</button></td></tr>
              <tr data-qmin="51" data-qmax="9999"><td>51å•ã€œ</td><td data-price="-1">Ask</td><td>ã”ç›¸è«‡</td><td><span class="muted">å€‹åˆ¥è¦‹ç©</span></td></tr>
            </tbody>
          </table>
        </div>
        <p class="note">â€» è¨­å•æ•°ã«å¿œã˜ãŸã‚·ãƒ³ãƒ—ãƒ«ãªæ–™é‡‘ã€‚æ¨™æº–ãƒ‡ãƒ¼ã‚¿ä½“è£ã§ã®æƒ³å®šã§ã™ã€‚</p>
      </div>
    </div>
  </section>

  <!-- Options -->
  <section id="options">
    <div class="wrap reveal">
      <h2>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆç¨åˆ¥ï¼‰</h2>
      <div class="card" style="overflow:auto">
        <table aria-label="ã‚ªãƒ—ã‚·ãƒ§ãƒ³">
          <thead><tr><th>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</th><th>å†…å®¹</th><th>æ–™é‡‘ï¼ˆç¨åˆ¥ï¼‰</th></tr></thead>
          <tbody>
            <tr><td>PowerPointç´å“</td><td>ç·¨é›†å¯èƒ½ãªPPTå½¢å¼ã§ã®ç´å“</td><td>1ã€œ10å• 22,000å††ï¼11ã€œ30å• 33,000å††ï¼31ã€œ50å• 44,000å††ï¼51å•ã€œ Ask</td></tr>
            <tr><td>ãƒªã‚µãƒ¼ãƒãƒ£ãƒ¼æœ€çµ‚åŒ–</td><td>AIãƒ¬ãƒãƒ¼ãƒˆã‚’åŸºã«ãƒ—ãƒ­ãŒæœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆ</td><td>1ã€œ10å• 99,000å††ï¼11ã€œ30å• 149,000å††ï¼31ã€œ50å• 199,000å††ï¼51å•ã€œ Ask</td></tr>
            <tr><td>FAè¨­å•ã®AIåˆ†æ</td><td>è‡ªç”±å›ç­”ãƒ†ã‚­ã‚¹ãƒˆã®è¦ç´„ãƒ»åˆ†é¡ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º</td><td>1å•ã‚ãŸã‚Š 22,000å††</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Flow -->
  <section id="flow" class="alt">
    <div class="wrap reveal">
      <h2>å°å…¥ãƒ•ãƒ­ãƒ¼ï¼ˆæ¨™æº–ï¼‰</h2>
      <ol class="flow">
        <li>ãƒ‡ãƒ¼ã‚¿å—é ˜ï¼šèª¿æŸ»æ¦‚è¦ã¨ãƒ­ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãŠé ã‹ã‚Šã—ã¾ã™ã€‚</li>
        <li>AIåˆ†æï¼šãƒ‡ãƒ¼ã‚¿å‡¦ç†ã¨é›†è¨ˆãƒ»åˆ†æã‚’å®Ÿæ–½ã—ã¾ã™ã€‚</li>
        <li>ç´å“ï¼šåŸå‰‡ã€ç¿Œå–¶æ¥­æ—¥ã«PDFãƒ¬ãƒãƒ¼ãƒˆã‚’ç´å“ã—ã¾ã™ã€‚</li>
        <li>ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¯¾å¿œï¼šPPTç´å“ï¼æœ€çµ‚åŒ–ï¼FAåˆ†æãªã©ã¯å€‹åˆ¥ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã§å¯¾å¿œã—ã¾ã™ã€‚</li>
      </ol>
    </div>
  </section>

  <!-- Security -->
  <section id="security">
    <div class="wrap reveal">
      <h2>NDA / ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆè¦ç‚¹ï¼‰</h2>
      <div class="grid g-2">
        <ul class="card">
          <li><strong>NDAï¼š</strong>ç§˜å¯†æƒ…å ±ã®ç¯„å›²ã«è¨­å•ç¥¨/ãƒ­ãƒ¼ãƒ‡ãƒ¼ã‚¿/å‡ºåŠ›ç‰©ã‚’æ˜ç¤ºã€‚å­˜ç¶š3ã€œ5å¹´ï¼ˆèª¿æ•´å¯ï¼‰ã€‚</li>
          <li><strong>ãƒ‡ãƒ¼ã‚¿å–æ‰±ã„ï¼š</strong>ä¿å­˜æ™‚AES-256ã€è»¢é€æ™‚TLSã€‚ç´å“å¾Œ30ã€œ90æ—¥ã§å®‰å…¨æ¶ˆå»ï¼ˆè¨¼è·¡æä¾›å¯ï¼‰ã€‚</li>
          <li><strong>ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼š</strong>æœ€å°æ¨©é™ãƒ»MFAã€‚ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã¯90æ—¥ä»¥ä¸Šä¿æŒã€‚ç¬¬ä¸‰è€…å†æä¾›ã¯ç¦æ­¢ã€‚</li>
          <li><strong>ç”ŸæˆAIåˆ©ç”¨ï¼š</strong>é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã¯å­¦ç¿’ç”¨é€”ã«ä¸ä½¿ç”¨ã€‚å¤–éƒ¨æ¨è«–ã¯å¥‘ç´„æ¡ä»¶ã«æº–æ‹ ã€‚</li>
          <li><strong>å€‹äººæƒ…å ±ï¼š</strong>ä»®ååŠ å·¥ã¾ãŸã¯å‰Šé™¤ã®ä¸Šã§å‡¦ç†ã€‚</li>
        </ul>
        <div class="card">
          <h3>æœŸå¾…KPIï¼ˆä¾‹ï¼‰</h3>
          <table>
            <thead><tr><th>ã‚«ãƒ†ã‚´ãƒª</th><th>KPI æŒ‡æ¨™</th><th>åˆæœŸç›®æ¨™å€¤</th></tr></thead>
            <tbody>
              <tr><td>ã‚¹ãƒ”ãƒ¼ãƒ‰</td><td>åˆå›ãƒ¬ãƒãƒ¼ãƒˆTATï¼ˆå–¶æ¥­æ—¥ï¼‰</td><td>1.0ï¼ˆç¿Œå–¶æ¥­æ—¥ç´å“é”æˆç‡90%ä»¥ä¸Šï¼‰</td></tr>
              <tr><td>å“è³ª</td><td>ãƒ¬ãƒãƒ¼ãƒˆå·®æˆ»ã—ç‡</td><td>â‰¦5%</td></tr>
              <tr><td>æ´»ç”¨åº¦</td><td>é€±æ¬¡ä¼šè­°ã§ã®æ´»ç”¨ç‡</td><td>â‰§80%</td></tr>
              <tr><td>ã‚³ã‚¹ãƒˆ</td><td>å¤–éƒ¨è¿½åŠ å§”è¨—æ¯”ç‡</td><td>â–²20%</td></tr>
              <tr><td>æº€è¶³åº¦</td><td>ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼æº€è¶³åº¦ï¼ˆ5æ®µéšï¼‰</td><td>â‰§4.2</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- SLA -->
  <section id="sla" class="alt">
    <div class="wrap reveal">
      <h2>SLAï¼ˆä¾‹ï¼‰</h2>
      <div class="card" style="overflow:auto">
        <table>
          <thead><tr><th>é …ç›®</th><th>SLAæ°´æº–</th><th>å‚™è€ƒ</th></tr></thead>
          <tbody>
            <tr><td>ç´æœŸéµå®ˆç‡</td><td>â‰§90%ï¼ˆç¿Œå–¶æ¥­æ—¥ï¼‰</td><td>æ¨™æº–ãƒ‡ãƒ¼ã‚¿ä½“è£ãŒå‰æ</td></tr>
            <tr><td>åˆå›å¿œç­”æ™‚é–“</td><td>1å–¶æ¥­æ—¥ä»¥å†…</td><td>å•ã„åˆã‚ã›å—ä»˜ã‹ã‚‰ã®åˆå›è¿”ä¿¡</td></tr>
            <tr><td>ã‚µãƒãƒ¼ãƒˆå¯¾å¿œ</td><td>å¹³æ—¥ 9:00ã€œ18:00ï¼ˆJSTï¼‰</td><td>ãƒ¡ãƒ¼ãƒ«ï¼ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè­°</td></tr>
            <tr><td>å†ç´å“ãƒãƒªã‚·ãƒ¼</td><td>è»½å¾®ä¿®æ­£ 1å›ã¾ã§ç„¡å„Ÿ</td><td>æ§‹æˆå¤‰æ›´ã‚„æ·±æ˜ã‚Šåˆ†æã¯åˆ¥é€”è¦‹ç©</td></tr>
            <tr><td>ãƒ‡ãƒ¼ã‚¿ä¿æŒ</td><td>ç´å“å¾Œ30ã€œ90æ—¥ã§å®‰å…¨æ¶ˆå»</td><td>æœŸé–“ã¯å¥‘ç´„ã§èª¿æ•´å¯</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq">
    <div class="wrap reveal">
      <h2>FAQ</h2>
      <div class="grid g-2">
        <div class="card"><h3>ã©ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿å½¢å¼ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</h3><p>CSV/TSV/XLSXãªã©ã®è¡¨å½¢å¼ãƒ‡ãƒ¼ã‚¿ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚è¨­å•ç¥¨ã¨å¯¾å¿œè¡¨ãŒã‚ã‚‹ã¨æœ€çŸ­ã§é€²è¡Œã§ãã¾ã™ã€‚</p></div>
        <div class="card"><h3>ç¿Œå–¶æ¥­æ—¥ç´å“ã¯å¿…ãšå¯èƒ½ã§ã™ã‹ï¼Ÿ</h3><p>æ¨™æº–ä½“è£ãŒå‰æã§ã™ã€‚å¤§é‡ã®FAã‚„ç‰¹æ®Šé›†è¨ˆã¯è¿½åŠ æ—¥ç¨‹ã®ã”ç›¸è«‡ã¨ãªã‚Šã¾ã™ã€‚</p></div>
        <div class="card"><h3>ãƒ¬ãƒãƒ¼ãƒˆã®ä½“è£ã¯ï¼Ÿ</h3><p>PDFã‚’æ¨™æº–ç´å“ã€‚PPTã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¦ç·¨é›†å¯èƒ½ãªå½¢ã§ã‚‚æä¾›å¯èƒ½ã§ã™ã€‚</p></div>
        <div class="card"><h3>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã¸ã®é©åˆãŒå¿…è¦ã§ã™ã€‚</h3><p>NDA/ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡/ãƒ‡ãƒ¼ã‚¿ä¿æŒãƒãƒªã‚·ãƒ¼ã‚’å¥‘ç´„ã«æ˜è¨˜ã—ã¾ã™ã€‚ç›£æŸ»å¯¾å¿œã‚‚ç›¸è«‡å¯ã€‚</p></div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section id="cta" class="alt">
    <div class="wrap reveal">
      <div class="cta">
        <div><strong>ç¿Œå–¶æ¥­æ—¥ã®â€œä½¿ãˆã‚‹â€ãƒ¬ãƒãƒ¼ãƒˆã€‚</strong><br>ã¾ãšã¯èª¿æŸ»ç¥¨ã¨ãƒ­ãƒ¼ãƒ‡ãƒ¼ã‚¿ã§<strong>ç„¡æ–™è¦‹ç©</strong>ã‚’ã”ä¾é ¼ãã ã•ã„ã€‚</div>
        <button class="cta-btn" id="ctaBottom">ä»Šã™ãç„¡æ–™ã§å§‹ã‚ã¾ã—ã‚‡ã†ï¼</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="wrap">
      <small>Â© 2025 KITAI Inc. / æœ¬ã‚µã‚¤ãƒˆã¯ã€InsightSprintã€ã®ç´¹ä»‹ãƒšãƒ¼ã‚¸ã§ã™ã€‚æ­£å¼æ•°å€¤ã¯å¥‘ç´„æ™‚ã«ç¢ºå®šã—ã¾ã™ã€‚</small>
    </div>
  </footer>

  <!-- Get Started Modal + Payment -->
  <dialog id="startModal" aria-labelledby="startTitle">
    <form method="dialog" class="modal" id="startFormWrapper" novalidate>
      <header class="nav" style="height:auto; padding:12px 18px">
        <h3 id="startTitle" style="margin:0">ç„¡æ–™ã§å§‹ã‚ã‚‹ï¼ˆãŠè¦‹ç© & ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆï¼‰</h3>
        <button value="close" aria-label="é–‰ã˜ã‚‹" style="border:none; background:transparent; font-size:20px; cursor:pointer">âœ•</button>
      </header>
      <div style="padding:0 18px 18px">
        <p class="muted">è¨­å•æ•°ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€è‡ªå‹•ã§æ¦‚ç®—è¦‹ç©ã‚’ç®—å‡ºã—ã¾ã™ã€‚è¦‹ç©å¾Œã€ãã®ã¾ã¾ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã§ãŠæ”¯æ‰•ã„ã§ãã¾ã™ã€‚</p>

        <div class="field">
          <label for="org">ä¼šç¤¾å <span class="muted">(å¿…é ˆ)</span></label>
          <input id="org" name="org" type="text" required placeholder="KITAIæ ªå¼ä¼šç¤¾" />
        </div>
        <div class="field">
          <label for="name">ã”æ‹…å½“è€…å <span class="muted">(å¿…é ˆ)</span></label>
          <input id="name" name="name" type="text" required placeholder="å±±ç”° å¤ªéƒ" />
        </div>
        <div class="field">
          <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="muted">(å¿…é ˆ)</span></label>
          <input id="email" name="email" type="email" inputmode="email" required placeholder="you@example.com" />
        </div>
        <div class="field">
          <label for="qcount">è¨­å•æ•°ï¼ˆåˆè¨ˆï¼‰ <span class="muted">(å¿…é ˆ)</span></label>
          <input id="qcount" name="qcount" type="number" min="1" step="1" required placeholder="ä¾‹) 25" />
        </div>
        <div class="field">
          <label for="faCount">FAï¼ˆè‡ªç”±å›ç­”ï¼‰è¨­å•æ•° <span class="muted">(ä»»æ„)</span></label>
          <input id="faCount" name="faCount" type="number" min="0" step="1" placeholder="ä¾‹) 2" />
          <small class="muted">â€» FAã¯1å•ã‚ãŸã‚Š 22,000å††ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰</small>
        </div>
        <div class="field">
          <label for="files">ãƒ•ã‚¡ã‚¤ãƒ«æ·»ä»˜ï¼ˆè¨­å•ç¥¨ãƒ»ãƒ­ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰</label>
          <input id="files" name="files" type="file" multiple />
        </div>

        <div class="card" id="quoteBox" aria-live="polite">
          <strong>æ¦‚ç®—è¦‹ç©</strong>
          <div id="quoteResult" class="muted">è¨­å•æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</div>
        </div>

        <!-- æ”¯æ‰•ã„ãƒ‘ãƒãƒ« -->
        <div class="card" id="payPanel" style="display:none">
          <strong>ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã§æ”¯æ‰•ã†</strong>
          <div class="muted" style="margin:6px 0 8px">
            é‡‘é¡ã¨æ˜ç´°ã‚’ã”ç¢ºèªã®ä¸Šã€ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆã¸ãŠé€²ã¿ãã ã•ã„ï¼ˆStripe Checkoutï¼‰ã€‚
          </div>
          <ul style="margin:0; padding-left:18px; font-size:14px; color:var(--sub)">
            <li>ä¼šç¤¾åãƒ»ã”æ‹…å½“è€…åãƒ»ãƒ¡ãƒ¼ãƒ«ã‚’å…ƒã«é ˜åæ›¸ï¼ˆè‡ªå‹•ç™ºè¡Œï¼‰ã‚’é€ä»˜</li>
            <li>ç¨è¾¼ã¿/è«‹æ±‚æ›¸æ‰•ã„ç­‰ãŒå¿…è¦ãªå ´åˆã¯é€ä¿¡ã®ã¿è¡Œã„ã€å¾Œæ—¥ã”æ¡ˆå†…ã—ã¾ã™</li>
          </ul>
          <div style="display:flex; gap:10px; align-items:center; margin-top:10px; flex-wrap:wrap">
            <button type="button" id="payNow" class="cta-btn" disabled>ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã§æ”¯æ‰•ã†</button>
            <span id="payNote" class="muted">è¦‹ç©ãŒç¢ºå®šã™ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚Šã¾ã™</span>
          </div>
        </div>

        <div class="field">
          <label for="notes">è£œè¶³</label>
          <textarea id="notes" name="notes" rows="3" placeholder="ç´æœŸã‚„é›†è¨ˆæ¡ä»¶ãªã©"></textarea>
        </div>

        <div style="display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap">
          <button class="cta-btn" id="submitStart" type="submit" value="submit">é€ä¿¡ã™ã‚‹</button>
          <label style="display:flex; align-items:center; gap:6px"><input id="agree" type="checkbox" required /> åˆ©ç”¨è¦ç´„ã¨å€‹äººæƒ…å ±ã®å–æ‰±ã„ã«åŒæ„ã—ã¾ã™ã€‚</label>
        </div>

        <p class="note" style="margin-top:8px">ãŠæ€¥ãã®å ´åˆï¼šå¹³æ—¥ 9:00ã€œ18:00ï¼ˆJSTï¼‰ / Tel: 03-XXXX-XXXX</p>
      </div>

      <template id="thanksTpl">
        <div style="padding:18px">
          <h3>é€ä¿¡ãŒå®Œäº†ã—ã¾ã—ãŸ</h3>
          <p>ã”ä¾é ¼ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚æ‹…å½“ã‚ˆã‚Š<em>1å–¶æ¥­æ—¥ä»¥å†…</em>ã«ã”é€£çµ¡ã—ã¾ã™ã€‚</p>
          <div class="card">
            <strong>æ§ãˆ</strong>
            <div id="summary"></div>
          </div>
          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
            <button class="cta-btn" value="close">é–‰ã˜ã‚‹</button>
            <a class="cta-btn" href="#pricing" style="background:transparent; color:var(--accent); border:2px solid var(--accent)">æ–™é‡‘ã¸æˆ»ã‚‹</a>
          </div>
        </div>
      </template>
    </form>
  </dialog>

  <script>
    // ===== Stripe instanceï¼ˆå…¬é–‹éµã‚’å·®ã—æ›¿ãˆã¦ãã ã•ã„ï¼‰ =====
    const STRIPE_PUBLISHABLE_KEY = "pk_test_xxxxxxxxxxxxxxxxxxxxx"; // TODO: ç½®ãæ›ãˆ
    const stripe = window.Stripe ? Stripe(STRIPE_PUBLISHABLE_KEY) : null;

    // ===== Common refs =====
    const startModal = document.getElementById('startModal');

    // ===== Open modal from any CTA (incl. floating) =====
    for (const id of ['ctaTop','ctaHero','ctaBottom','ctaFloat']){
      const el = document.getElementById(id);
      if(el){ el.addEventListener('click', () => startModal.showModal()); }
    }

    // ===== Header shadow on scroll =====
    const header = document.getElementById('siteHeader');
    const onScroll = () => {
      if(window.scrollY > 6) header.classList.add('is-scrolled');
      else header.classList.remove('is-scrolled');
    };
    window.addEventListener('scroll', onScroll, {passive:true});
    onScroll();

    // ===== Reveal on scroll =====
    const io = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add('is-in');
          io.unobserve(e.target);
        }
      });
    }, {threshold:.12});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    // ===== Pricing Table: shortcut buttons to open modal with preset qcount =====
    const pricingTable = document.getElementById('pricingTable');
    if (pricingTable) {
      pricingTable.querySelectorAll('button[data-pay-tier]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const tier = parseInt(btn.getAttribute('data-pay-tier'),10);
          startModal.showModal();
          const qInput = document.getElementById('qcount');
          if (qInput) {
            // ãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆå„ãƒ¬ãƒ³ã‚¸ã®ä¸Šé™ã‚’ä»®ã§å…¥ã‚Œã‚‹ï¼‰
            qInput.value = tier;
            qInput.dispatchEvent(new Event('input'));
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã‚’è¦‹ç©ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
            setTimeout(()=>document.getElementById('payPanel')?.scrollIntoView({behavior:'smooth', block:'center'}), 150);
          }
        });
      });
    }

    // ===== Quote calculation aligned with pricing =====
    const qcount = document.getElementById('qcount');
    const faCount = document.getElementById('faCount');
    const quoteResult = document.getElementById('quoteResult');
    const payPanel = document.getElementById('payPanel');
    const payNow = document.getElementById('payNow');
    const payNote = document.getElementById('payNote');

    function calcQuote(){
      const q = parseInt(qcount.value, 10);
      const fa = parseInt(faCount.value || '0', 10);
      if (!q || q < 1){
        quoteResult.textContent = 'è¨­å•æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
        if (payPanel) payPanel.style.display = 'none';
        if (payNow) payNow.disabled = true;
        return;
      }
      let base = 0, tier = '';
      if (q <= 10){ base = 79000; tier = '1ã€œ10å•'; }
      else if (q <= 30){ base = 99000; tier = '11ã€œ30å•'; }
      else if (q <= 50){ base = 119000; tier = '31ã€œ50å•'; }
      else {
        quoteResult.innerHTML = `è¨­å•æ•°: <strong>${q}å•</strong> / æ–™é‡‘: <strong>Ask</strong>ï¼ˆå€‹åˆ¥ãŠè¦‹ç©ï¼‰`;
        if (payPanel) payPanel.style.display = 'none';
        if (payNow) payNow.disabled = true;
        return;
      }
      const faFee = fa > 0 ? fa * 22000 : 0;
      const total = base + faFee;
      quoteResult.innerHTML =
        `è¨­å•æ•°: <strong>${q}å•ï¼ˆ${tier}ï¼‰</strong><br>
         åŸºæœ¬æ–™é‡‘: <strong>${base.toLocaleString()}å††</strong>${fa>0?` + FA(${fa}å•): <strong>${faFee.toLocaleString()}å††</strong>`:''}<br>
         æ¦‚ç®—åˆè¨ˆ: <strong style="font-size:18px">${total.toLocaleString()}å††ï¼ˆç¨åˆ¥ï¼‰</strong>`;

      // æ”¯æ‰•ã„ãƒ‘ãƒãƒ«ã‚’å‡ºã™
      if (payPanel) payPanel.style.display = 'block';
      if (payNow) payNow.disabled = false;
      if (payNote) payNote.textContent = 'ã“ã®å†…å®¹ã§ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆã«é€²ã¿ã¾ã™ï¼ˆç¨åˆ¥ï¼‰';
    }
    if(qcount && faCount){
      qcount.addEventListener('input', calcQuote);
      faCount.addEventListener('input', calcQuote);
    }

    // ===== Submit (simulate), validate minimal fields, store locally and show thanks =====
    const form = document.getElementById('startFormWrapper');
    if(form){
      form.addEventListener('submit', (e) => {
        if (form.returnValue === 'close') return; // Closed via âœ•
        e.preventDefault();
        const req = ['org','name','email','qcount','agree'];
        for (const id of req){
          const el = document.getElementById(id);
          if ((el.type === 'checkbox' && !el.checked) || (!el.value)){
            el.focus();
            alert('æœªå…¥åŠ›ã®å¿…é ˆé …ç›®ãŒã‚ã‚Šã¾ã™');
            return;
          }
        }
        const data = collectFormData();
        localStorage.setItem('insightsprint_lead', JSON.stringify(data));
        renderThanks(data);
      });
    }

    function collectFormData(){
      return {
        org: document.getElementById('org').value.trim(),
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        qcount: parseInt(document.getElementById('qcount').value, 10),
        faCount: parseInt(document.getElementById('faCount').value || '0', 10),
        notes: document.getElementById('notes').value.trim(),
        when: new Date().toLocaleString()
      };
    }

    function renderThanks(data){
      const tpl = document.getElementById('thanksTpl');
      const clone = tpl.content.cloneNode(true);
      const box = clone.querySelector('#summary');
      const faFee = data.faCount * 22000;
      let base = 0;
      if (data.qcount <= 10) base = 79000;
      else if (data.qcount <= 30) base = 99000;
      else if (data.qcount <= 50) base = 119000;
      const total = base + faFee;
      box.innerHTML = `
        <div>ä¼šç¤¾åï¼š<strong>${data.org}</strong></div>
        <div>æ°åï¼š<strong>${data.name}</strong></div>
        <div>ãƒ¡ãƒ¼ãƒ«ï¼š<strong>${data.email}</strong></div>
        <div>è¨­å•æ•°ï¼š<strong>${data.qcount}å•</strong> / FAï¼š<strong>${data.faCount}å•</strong></div>
        <div>æ¦‚ç®—åˆè¨ˆï¼ˆç¨åˆ¥ï¼‰ï¼š<strong>${base>0? total.toLocaleString()+'å††':'Ask'}</strong></div>
        <div>é€ä¿¡æ—¥æ™‚ï¼š${data.when}</div>
      `;
      form.innerHTML = '';
      form.appendChild(clone);
    }

    // ===== Payment: Stripe Checkout =====
    if (payNow){
      payNow.addEventListener('click', async () => {
        // å‰æãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼šå¿…é ˆã¨è¦‹ç©
        const must = ['org','name','email','qcount','agree'];
        for (const id of must){
          const el = document.getElementById(id);
          if ((el.type === 'checkbox' && !el.checked) || (!el.value)){
            el && el.focus();
            alert('ãŠæ”¯æ‰•ã„å‰ã«ã€å¿…é ˆé …ç›®ã¨è¦‹ç©ã‚’å®Œäº†ã—ã¦ãã ã•ã„ã€‚');
            return;
          }
        }
        const data = collectFormData();
        // 51å•ã€œã¯å€‹åˆ¥è¦‹ç©
        if (data.qcount > 50){
          alert('51å•ä»¥ä¸Šã¯å€‹åˆ¥è¦‹ç©ã®ãŸã‚ã€ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆã¯ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã›ã‚“ã€‚');
          return;
        }
        const base = data.qcount<=10?79000: data.qcount<=30?99000:119000;
        const faFee = data.faCount * 22000;
        const totalTaxExcluded = base + faFee;
        // Stripeã¯æœ€å°å˜ä½ï¼ˆJPYã¯1å††å˜ä½ï¼‰
        const amount = totalTaxExcluded;

        if (!stripe){
          alert('Stripeã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨å…¬é–‹éµã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
          return;
        }

        try{
          // ã‚µãƒ¼ãƒãƒ¼å´ã§Checkout Sessionã‚’ä½œæˆã—ã¦ãã ã•ã„
          const res = await fetch('/api/create-checkout-session', {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({
              currency: 'JPY',
              amount: amount, // ç¨åˆ¥
              customer_email: data.email,
              metadata: {
                org: data.org,
                contact_name: data.name,
                qcount: String(data.qcount),
                fa_count: String(data.faCount),
                notes: data.notes || ''
              },
              line_items: [
                { name: 'InsightSprint åŸºæœ¬æ–™é‡‘', amount: base, currency:'JPY', quantity:1 },
                ...(data.faCount>0 ? [{ name:`FAåˆ†æ (${data.faCount}å•)`, amount: faFee, currency:'JPY', quantity:1 }] : [])
              ],
              // æˆåŠŸ/å–æ¶ˆå¾Œã®é·ç§»å…ˆï¼ˆé©å®œå¤‰æ›´ï¼‰
              success_url: window.location.origin + window.location.pathname + '#success',
              cancel_url: window.location.origin + window.location.pathname + '#cancel'
            })
          });
          if (!res.ok){
            const msg = await res.text();
            throw new Error('ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆã«å¤±æ•—ï¼š' + msg);
          }
          const { sessionId } = await res.json();
          const { error } = await stripe.redirectToCheckout({ sessionId });
          if (error) throw error;
        } catch(err){
          console.error(err);
          alert('æ±ºæ¸ˆã‚’é–‹å§‹ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚å¾Œã»ã©å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
        }
      });
    }

    // ===== Lightweight parallax particles in hero canvas =====
    const canvas = document.getElementById('fx');
    if(canvas){
      const ctx = canvas.getContext('2d');
      let w, h, particles = [];
      const R = () => Math.random();
      const resize = () => { w = canvas.width = canvas.offsetWidth; h = canvas.height = canvas.offsetHeight; };
      window.addEventListener('resize', resize); resize();
      const init = () => {
        particles = Array.from({length: 36}, ()=>({
          x: R()*w, y: R()*h*.7 + h*.05, r: R()*2+0.6, a: R()*Math.PI*2, s: R()*0.4+0.2
        }));
      };
      init();
      let mx = 0, my = 0;
      window.addEventListener('mousemove', e=>{
        const rect = canvas.getBoundingClientRect();
        mx = (e.clientX - rect.left)/w - .5;
        my = (e.clientY - rect.top)/h - .5;
      }, {passive:true});
      function loop(){
        ctx.clearRect(0,0,w,h);
        particles.forEach(p=>{
          p.x += Math.cos(p.a)*p.s*0.2 + mx*0.6;
          p.y += Math.sin(p.a)*p.s*0.2 + my*0.6;
          p.a += 0.01;
          if(p.x<-10) p.x=w+10; if(p.x>w+10) p.x=-10;
          if(p.y<-10) p.y=h+10; if(p.y>h+10) p.y=-10;
          const g = ctx.createLinearGradient(p.x-p.r, p.y-p.r, p.x+p.r, p.y+p.r);
          g.addColorStop(0, 'rgba(14,165,233,.55)');
          g.addColorStop(1, 'rgba(34,211,238,.45)');
          ctx.fillStyle = g;
          ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
        });
        requestAnimationFrame(loop);
      }
      loop();
    }
  </script>
</body>
</html>
